{% extends 'T&P_Dashboard.html' %}
{% load static %}
{% with section='invitations' page='invitation_status' %}
{% block title %}Company Invitation Panel{% endblock title %}
{% block css %}
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
{% endblock css %}

{% block content %}
  <!-- Main Content (from your version) -->
  <div class="invitation-management-layout">
    <h2 class="invitation-management-header">Company Invite Management</h2>

    <div class="invitation-search-section">
      <label for="companySelect" class="invitation-search-label">🔍 Search & Select Companies:</label>
      <div class="invitation-select2-container">
        <select id="companySelect" multiple="multiple" style="width: 100%;">
          {% for company in companies %}
            <option value="{{ company.company_id }}">{{ company.name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div id="inviteResults" class="invitation-results-container">
      <div class="invitation-results-empty">Select companies to view invitation status</div>
    </div>

    <!-- Modal -->
    <div id="overlay" class="invitation-modal-overlay"></div>
    <div id="emailModal" class="invitation-email-modal">
      <h3>Email Preview</h3>
      <form id="emailForm">
        <input type="hidden" id="modalCompanyId">
        <input type="hidden" id="modalMode">

        <div id="invitationDateGroup" style="margin-top: 10px; display: none;">
          <label for="invitationDate">📅 Select Invitation Date:</label>
          <input type="date" id="invitationDate" />
        </div>

        <textarea id="emailContent"></textarea>
        <br>
        <button type="submit">📤 Send</button>
        <button type="button" onclick="closeModal()">❌ Cancel</button>
      </form>
    </div>
  </div>
{% endblock content %}

{% block script %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="{% static 'js/Invitation_Status.js' %}"></script>
{% endblock script %}
{% endwith %}
